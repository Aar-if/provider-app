import{u as c,r as m,j as e}from"./index-cdfedc27.js";import{h as d,i as h}from"./tekdi-logo-black-de0b41ff.js";import{s as p}from"./register.module-7c99ab07.js";import{a as g,u}from"./axios-5cb6003d.js";import{c as x,a as n,o as f}from"./index.esm-5c2e1c12.js";import{F as j}from"./Footer-2132ffc3.js";const N=x().shape({userEmail:n().required("*Field required"),password:n().required("*Field required")}),v="https://onest-strapi.tekdinext.com/api",b=async t=>{console.log(t);const l=t.userEmail,i=t.password;let r;return await g.post(`${v}/auth/local`,{identifier:l,password:i}).then(s=>{var o,a;console.log(s),console.log(s.data),console.log(s.data.jwt),localStorage.setItem("loginJwt",s.data.jwt),localStorage.setItem("userId",(a=(o=s==null?void 0:s.data)==null?void 0:o.user)==null?void 0:a.id),s.status===200?r=!0:s.status===400&&(r=!1)}).catch(function(s){console.log(s.response.data.error.message);let o=0;return alert(s.response.data.error.message),o}),r};function I(){const t=c(),l=()=>{localStorage.setItem("login",!0),t("/")};m.useEffect(()=>{localStorage.getItem("token")&&t("/")},[]);const{register:i,handleSubmit:r,formState:{errors:s}}=u({resolver:f(N)}),o=async a=>{console.log(a),await b(a)==!0&&(alert("Logged in successfully."),t("/home"))};return e.jsxs("div",{children:[e.jsxs("div",{style:{background:"linear-gradient(to bottom, #FFFFFF, #dfe4ff )",height:"100vh"},children:[e.jsxs("div",{className:d.headerDiv,children:[e.jsx("div",{children:e.jsx("img",{src:h,style:{width:"50px",height:"auto"}})}),e.jsx("div",{style:{textAlign:"center",marginLeft:"10px",borderLeft:"2px solid gray",paddingLeft:"10px"},children:e.jsx("h3",{children:"Provide Education and Skilling Opportunities"})})]}),e.jsxs("div",{className:p.formDiv,children:[e.jsxs("form",{className:" card-body form-floating mt-3 mx-1",onSubmit:r(o),autoComplete:"off",children:[e.jsx("div",{className:"container mb-3",children:e.jsx("div",{className:"h2",style:{color:"#0F75BC"},children:"Log In to ONEST"})}),e.jsx("div",{className:"container mb-3",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{className:"form-control",type:"text",name:"contentName",id:"contentName",placeholder:"Name of the content",...i("userEmail")}),e.jsxs("label",{className:"form-label",htmlFor:"contentName",children:[" ","Email"]}),s.userEmail&&e.jsx("p",{children:s.userEmail.message})]})}),e.jsx("div",{className:"container mb-3",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{className:"form-control",type:"password",name:"contentName",id:"contentName",placeholder:"Name of the content",...i("password")}),e.jsxs("label",{className:"form-label",htmlFor:"contentName",children:[" ","Password"]}),s.password&&e.jsx("p",{children:s.password.message})]})}),e.jsx("div",{className:"container mb-3",children:e.jsx("div",{style:{marginTop:"25px"},children:e.jsx("button",{className:"btn btn-primary",onClick:l,children:"Login"})})})]}),e.jsxs("div",{children:["Login to ðŸ‘‰"," ",e.jsx("a",{href:"https://onest-explorer.tekdinext.com/",children:"Seeker app"})]})]})]}),e.jsx("div",{children:e.jsx(j,{})})]})}export{I as default};
