import{u as c,r as m,j as e}from"./index-8b64dca5.js";import{h as d,i as h}from"./tekdi-logo-black-37dfb79c.js";import{s as u}from"./register.module-7c99ab07.js";import{a as g,u as p}from"./axios-719bd9e3.js";import{c as f,a as n,o as x}from"./index.esm-435a6470.js";const j=f().shape({userEmail:n().required("*Field required"),password:n().required("*Field required")}),N="https://onest-strapi.tekdinext.com/api",v=async t=>{console.log(t);const i=t.userEmail,l=t.password;let r;return await g.post(`${N}/auth/local`,{identifier:i,password:l}).then(s=>{var a,o;console.log(s),console.log(s.data),console.log(s.data.jwt),localStorage.setItem("loginJwt",s.data.jwt),localStorage.setItem("userId",(o=(a=s==null?void 0:s.data)==null?void 0:a.user)==null?void 0:o.id),s.status===200?r=!0:s.status===400&&(r=!1)}).catch(function(s){console.log(s.response.data.error.message);let a=0;return alert(s.response.data.error.message),a}),r};function L(){const t=c(),i=()=>{localStorage.setItem("login",!0),t("/")};m.useEffect(()=>{localStorage.getItem("token")&&t("/")},[]);const{register:l,handleSubmit:r,formState:{errors:s}}=p({resolver:x(j)}),a=async o=>{console.log(o),await v(o)==!0&&(alert("Logged in successfully."),t("/home"))};return e.jsxs("div",{style:{background:"linear-gradient(to bottom, #FFFFFF, #dfe4ff )",height:"100vh"},children:[e.jsxs("div",{className:d.headerDiv,children:[e.jsx("div",{children:e.jsx("img",{src:h,style:{width:"50px",height:"auto"}})}),e.jsx("div",{style:{textAlign:"center",marginLeft:"10px",borderLeft:"2px solid gray",paddingLeft:"10px"},children:e.jsx("h3",{children:"Provide Education and Skilling Opportunities"})})]}),e.jsx("div",{className:u.formDiv,children:e.jsxs("form",{className:" card-body form-floating mt-3 mx-1",onSubmit:r(a),autoComplete:"off",children:[e.jsx("div",{className:"container mb-3",children:e.jsx("div",{className:"h2",style:{color:"#0F75BC"},children:"Log In to ONEST"})}),e.jsx("div",{className:"container mb-3",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{className:"form-control",type:"text",name:"contentName",id:"contentName",placeholder:"Name of the content",...l("userEmail")}),e.jsxs("label",{className:"form-label",htmlFor:"contentName",children:[" ","Email"]}),s.userEmail&&e.jsx("p",{children:s.userEmail.message})]})}),e.jsx("div",{className:"container mb-3",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{className:"form-control",type:"password",name:"contentName",id:"contentName",placeholder:"Name of the content",...l("password")}),e.jsxs("label",{className:"form-label",htmlFor:"contentName",children:[" ","Password"]}),s.password&&e.jsx("p",{children:s.password.message})]})}),e.jsx("div",{className:"container mb-3",children:e.jsx("div",{style:{marginTop:"25px"},children:e.jsx("button",{className:"btn btn-primary",onClick:i,children:"Login"})})})]})})]})}export{L as default};
